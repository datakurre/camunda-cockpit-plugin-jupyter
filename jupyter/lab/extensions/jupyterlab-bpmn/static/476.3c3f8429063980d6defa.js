"use strict";(self.webpackChunkjupyterlab_bpmn=self.webpackChunkjupyterlab_bpmn||[]).push([[476],{476:(t,e,n)=>{n.r(e),n.d(e,{default:()=>X});var r=/^class /;function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(){var t=Array.prototype.slice.call(arguments);1===t.length&&i(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var a=/constructor\s*[^(]*\(\s*([^)]*)\)/m,h=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,c=/\/\*([^*]*)\*\//m;function u(t){if("function"!=typeof t)throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(function(t){return r.test(t.toString())}(t)?a:h);return e&&e[1]&&e[1].split(",").map((function(t){return(e=t.match(c))?e[1].trim():t.trim()}))||[]}function f(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}function p(t,e){e=e||{get:function(t,e){if(n.push(t),!1===e)return null;throw c('No provider for "'+t+'"!')}};var n=[],r=this._providers=Object.create(e._providers||null),a=this._instances=Object.create(null),h=a.injector=this,c=function(t){var e=n.join(" -> ");return n.length=0,new Error(e?t+" (Resolving: "+e+")":t)},l=function(t,i){if(!r[t]&&-1!==t.indexOf(".")){for(var s=t.split("."),h=l(s.shift());s.length;)h=h[s.shift()];return h}if(o(a,t))return a[t];if(o(r,t)){if(-1!==n.indexOf(t))throw n.push(t),c("Cannot resolve circular dependency!");return n.push(t),a[t]=r[t][0](r[t][1]),n.pop(),a[t]}return e.get(t,i)},d=function(t,e){if(void 0===e&&(e={}),"function"!=typeof t){if(!i(t))throw new Error('Cannot invoke "'+t+'". Expected a function!');t=s(t.slice())}return{fn:t,dependencies:(t.$inject||u(t)).map((function(t){return o(e,t)?e[t]:l(t)}))}},v=function(t){var e=d(t),n=e.fn,r=e.dependencies;return new(Function.prototype.bind.apply(n,[null].concat(r)))},y=function(t,e,n){var r=d(t,n),i=r.fn,o=r.dependencies;return i.apply(e,o)},_=function(t){return s((function(e){return t.get(e)}))},g={factory:y,type:v,value:function(t){return t}};t.forEach((function(t){function e(t,e){return"value"!==t&&i(e)&&(e=s(e.slice())),e}if(t instanceof f)t.forEach((function(t){var n=t[0],i=t[1],o=t[2];r[n]=[g[i],e(i,o),i]}));else if("object"==typeof t)if(t.__exports__){var n=Object.keys(t).reduce((function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e}),Object.create(null)),o=new p((t.__modules__||[]).concat([n]),h),a=s((function(t){return o.get(t)}));t.__exports__.forEach((function(t){r[t]=[a,t,"private",o]}))}else Object.keys(t).forEach((function(n){if("private"!==t[n][2]){var i=t[n][0],o=t[n][1];r[n]=[g[i],e(i,o),i]}else r[n]=t[n]}))})),this.get=l,this.invoke=y,this.instantiate=v,this.createChild=function(t,e){if(e&&e.length){var n,i,o,s,a=Object.create(null),c=Object.create(null),u=[],f=[],l=[];for(var d in r)n=r[d],-1!==e.indexOf(d)&&("private"===n[2]?-1===(i=u.indexOf(n[3]))?(o=n[3].createChild([],e),s=_(o),u.push(n[3]),f.push(o),l.push(s),a[d]=[s,d,"private",o]):a[d]=[l[i],d,"private",f[i]]:a[d]=[n[2],n[1]],c[d]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||e.forEach((function(t){-1!==n[1].$scope.indexOf(t)&&(a[d]=[n[2],n[1]],c[t]=!0)}));e.forEach((function(t){if(!c[t])throw new Error('No provider for "'+t+'". Cannot use provider from the parent!')})),t.unshift(a)}return new p(t,h)}}var l=n(717),d=n.n(l),v=n(858),y=n(230),_=n(487),g=n(490);function m(t,e){v.Z.call(this,t,1),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}d()(m,v.Z),m.prototype.canRender=function(){return!0},m.prototype.drawShape=function(t,e){var n=(0,_.Ue)("rect");return(0,_.Lj)(n,{x:0,y:0,width:e.width||0,height:e.height||0}),(0,g.He)(e)?(0,_.Lj)(n,this.FRAME_STYLE):(0,_.Lj)(n,this.SHAPE_STYLE),(0,_.R3)(t,n),n},m.prototype.drawConnection=function(t,e){var n=(0,y.W5)(e.waypoints,this.CONNECTION_STYLE);return(0,_.R3)(t,n),n},m.prototype.getShapePath=function(t){var e=t.x,n=t.y,r=t.width,i=[["M",e,n],["l",r,0],["l",0,t.height],["l",-r,0],["z"]];return(0,y.KO)(i)},m.prototype.getConnectionPath=function(t){var e,n,r=t.waypoints,i=[];for(e=0;n=r[e];e++)n=n.original||n,i.push([0===e?"M":"L",n.x,n.y]);return(0,y.KO)(i)},m.$inject=["eventBus","styles"];var w=n(670);const x={__init__:["defaultRenderer"],defaultRenderer:["type",m],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){var r=this.style(e,n);return(0,w.f0)(r,{class:t})},this.style=function(e,n){(0,w.kJ)(e)||n||(n=e,e=[]);var r=(0,w.u4)(e,(function(e,n){return(0,w.f0)(e,t[n]||{})}),{});return n?(0,w.f0)(r,n):r},this.computeStyle=function(t,n,r){return(0,w.kJ)(n)||(r=n,n=[]),e.style(n||[],(0,w.f0)({},r,t||{}))}}]};var b=n(935);function E(t,e){return Math.round(t*e)/e}function j(t){return(0,w.hj)(t)?t+"px":t}function k(t,e,n){var r=(0,_.Ue)("g");(0,_.Sh)(r).add(e);var i=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(r,t.childNodes[i]||null),r}var L={shape:["x","y","width","height"],connection:["waypoints"]};function C(t,e,n,r){this._eventBus=e,this._elementRegistry=r,this._graphicsFactory=n,this._init(t||{})}function S(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}C.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],C.prototype._init=function(t){var e=this._eventBus,n=this._container=function(t){var e=(t=(0,w.f0)({},{width:"100%",height:"100%"},t)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),(0,w.f0)(n.style,{position:"relative",overflow:"hidden",width:j(t.width),height:j(t.height)}),e.appendChild(n),n}(t),r=this._svg=(0,_.Ue)("svg");(0,_.Lj)(r,{width:"100%",height:"100%"}),(0,_.R3)(n,r);var i=this._viewport=k(r,"viewport");this._layers={},!1!==t.deferUpdate&&(this._viewboxChanged=(0,w.Ds)((0,w.ak)(this._viewboxChanged,this),300)),e.on("diagram.init",(function(){e.fire("canvas.init",{svg:r,viewport:i})}),this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],(function(){delete this._cachedViewbox}),this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},C.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},C.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach((function(e){var n=(0,g.oL)(e);"root"===n?t.setRootElement(null,!0):t._removeElement(e,n)})),delete this._cachedViewbox},C.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},C.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),void 0!==e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},C.prototype._createLayer=function(t,e){e||(e=0);var n=(0,w.u4)(this._layers,(function(t,n){return e>=n.index&&t++,t}),0);return{group:k(this._viewport,"layer-"+t,n),index:e}},C.prototype.getContainer=function(){return this._container},C.prototype._updateMarker=function(t,e,n){var r;t.id||(t=this._elementRegistry.get(t)),(r=this._elementRegistry._elements[t.id])&&((0,w.Ed)([r.gfx,r.secondaryGfx],(function(t){t&&(n?(0,_.Sh)(t).add(e):(0,_.Sh)(t).remove(e))})),this._eventBus.fire("element.marker.update",{element:t,gfx:r.gfx,marker:e,add:!!n}))},C.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},C.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},C.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));var n=this.getGraphics(t);return(0,_.Sh)(n).has(e)},C.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},C.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},C.prototype.setRootElement=function(t,e){t&&this._ensureValid("root",t);var n=this._rootElement,r=this._elementRegistry,i=this._eventBus;if(n){if(!e)throw new Error("rootElement already set, need to specify override");i.fire("root.remove",{element:n}),i.fire("root.removed",{element:n}),r.remove(n)}if(t){var o=this.getDefaultLayer();i.fire("root.add",{element:t}),r.add(t,o,this._svg),i.fire("root.added",{element:t,gfx:o})}return this._rootElement=t,t},C.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=L[t];if(!(0,w.yW)(n,(function(t){return void 0!==e[t]})))throw new Error("must supply { "+n.join(", ")+" } with "+t)},C.prototype._setParent=function(t,e,n){!function(t,e,n){if(t&&e){"number"!=typeof n&&(n=-1);var r=t.indexOf(e);if(-1!==r){if(r===n)return;if(-1===n)return;t.splice(r,1)}-1!==n?t.splice(n,0,e):t.push(e)}}(e.children,t,n),t.parent=e},C.prototype._addElement=function(t,e,n,r){n=n||this.getRootElement();var i=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),i.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,r);var s=o.create(t,e,r);return this._elementRegistry.add(e,s),o.update(t,e,s),i.fire(t+".added",{element:e,gfx:s}),e},C.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},C.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},C.prototype._removeElement=function(t,e){var n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(t=n.get(t.id||t))return i.fire(e+".remove",{element:t}),r.remove(t),function(t,e){if(!t||!e)return-1;var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(t.parent&&t.parent.children,t),t.parent=null,i.fire(e+".removed",{element:t}),n.remove(t),t},C.prototype.removeShape=function(t){return this._removeElement(t,"shape")},C.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},C.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},C.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},C.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},C.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,r,i,o,s,a=this._viewport,h=this.getSize();return t?(this._changeViewbox((function(){i=Math.min(h.width/t.width,h.height/t.height);var e=this._svg.createSVGMatrix().scale(i).translate(-t.x,-t.y);(0,_.vs)(a,e)})),t):(e=this.getDefaultLayer().getBBox(),n=(r=(0,_.vs)(a))?r.matrix:(0,_.wz)(),i=E(n.a,1e3),o=E(-n.e||0,1e3),s=E(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/i:0,y:s?s/i:0,width:h.width/i,height:h.height/i,scale:i,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:h})},C.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox((function(){t=(0,w.f0)({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),S(e,n)})),{x:n.e,y:n.f}},C.prototype.scrollToElement=function(t,e){var n=100;e||(e={}),"number"==typeof e&&(n=e),e={top:e.top||n,right:e.right||n,bottom:e.bottom||n,left:e.left||n};var r,i,o=(0,g.jY)(t),s=(0,b.JA)(o),a=this.viewbox(),h=this.zoom();a.y+=e.top/h,a.x+=e.left/h,a.width-=(e.right+e.left)/h,a.height-=(e.bottom+e.top)/h;var c=(0,b.JA)(a);if(o.width<a.width&&o.height<a.height){var u=Math.max(0,s.right-c.right),f=Math.min(0,s.left-c.left),p=Math.max(0,s.bottom-c.bottom),l=Math.min(0,s.top-c.top);r=u||f,i=p||l}else r=o.x-a.x,i=o.y-a.y;this.scroll({dx:-r*h,dy:-i*h})},C.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox((function(){"object"!=typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),r=this._setZoom(t,e)})),E(r.a,1e3)):this.viewbox(t).scale;var n,r},C.prototype._fitViewport=function(t){var e,n,r=this.viewbox(),i=r.outer,o=r.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=i.width&&o.y+o.height<=i.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,i.width),height:Math.max(o.height+o.y,i.height)}:(e=Math.min(1,i.width/o.width,i.height/o.height),n={x:o.x+(t?o.width/2-i.width/e/2:0),y:o.y+(t?o.height/2-i.height/e/2:0),width:i.width/e,height:i.height/e}),this.viewbox(n),this.viewbox(!1).scale},C.prototype._setZoom=function(t,e){var n,r,i,o,s=this._svg,a=this._viewport,h=s.createSVGMatrix(),c=s.createSVGPoint(),u=(r=a.getCTM()).a;return e?(n=(0,w.f0)(c,e).matrixTransform(r.inverse()),i=h.translate(n.x,n.y).scale(1/u*t).translate(-n.x,-n.y),o=r.multiply(i)):o=h.scale(t),S(this._viewport,o),o},C.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},C.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();return{x:(e=t.waypoints?this.getGraphics(t).getBBox():t).x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},C.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var R="data-element-id";function B(t){this._elements={},this._eventBus=t}B.$inject=["eventBus"],B.prototype.add=function(t,e,n){var r=t.id;this._validateId(r),(0,_.Lj)(e,R,r),n&&(0,_.Lj)(n,R,r),this._elements[r]={element:t,gfx:e,secondaryGfx:n}},B.prototype.remove=function(t){var e=this._elements,n=t.id||t,r=n&&e[n];r&&((0,_.Lj)(r.gfx,R,""),r.secondaryGfx&&(0,_.Lj)(r.secondaryGfx,R,""),delete e[n])},B.prototype.updateId=function(t,e){this._validateId(e),"string"==typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),r=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,r)},B.prototype.get=function(t){var e;e="string"==typeof t?t:t&&(0,_.Lj)(t,R);var n=this._elements[e];return n&&n.element},B.prototype.filter=function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(n)})),e},B.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),r=0;r<n.length;r++){var i=e[n[r]],o=i.element;if(t(o,i.gfx))return o}},B.prototype.getAll=function(){return this.filter((function(t){return t}))},B.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach((function(n){var r=e[n],i=r.element,o=r.gfx;return t(i,o)}))},B.prototype.getGraphics=function(t,e){var n=t.id||t,r=this._elements[n];return r&&(e?r.secondaryGfx:r.gfx)},B.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var O=n(235),M=n.n(O),V=new(M())({name:"children",enumerable:!0,collection:!0},{name:"parent"}),G=new(M())({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),N=new(M())({name:"attachers",collection:!0},{name:"host"}),P=new(M())({name:"outgoing",collection:!0},{name:"source"}),T=new(M())({name:"incoming",collection:!0},{name:"target"});function A(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),V.bind(this,"parent"),G.bind(this,"labels"),P.bind(this,"outgoing"),T.bind(this,"incoming")}function F(){A.call(this),V.bind(this,"children"),N.bind(this,"host"),N.bind(this,"attachers")}function I(){F.call(this)}function z(){F.call(this),G.bind(this,"labelTarget")}function U(){A.call(this),P.bind(this,"source"),T.bind(this,"target")}d()(F,A),d()(I,F),d()(z,F),d()(U,A);var $={connection:U,shape:F,label:z,root:I};function D(){this._uid=12}D.prototype.createRoot=function(t){return this.create("root",t)},D.prototype.createLabel=function(t){return this.create("label",t)},D.prototype.createShape=function(t){return this.create("shape",t)},D.prototype.createConnection=function(t){return this.create("connection",t)},D.prototype.create=function(t,e){return(e=(0,w.f0)({},e||{})).id||(e.id=t+"_"+this._uid++),function(t,e){var n=$[t];if(!n)throw new Error("unknown type: <"+t+">");return(0,w.f0)(new n,e)}(t,e)};var Y=Array.prototype.slice;function H(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function J(){}H.prototype.on=function(t,e,n,r){if(t=(0,w.kJ)(t)?t:[t],(0,w.mf)(e)&&(r=n,n=e,e=1e3),!(0,w.hj)(e))throw new Error("priority must be a number");var i=n;r&&((i=(0,w.ak)(n,r)).__fn=n.__fn||n);var o=this;t.forEach((function(t){o._addListener(t,{priority:e,callback:i,next:null})}))},H.prototype.once=function(t,e,n,r){var i=this;if((0,w.mf)(e)&&(r=n,n=e,e=1e3),!(0,w.hj)(e))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var e=n.apply(r,arguments);return i.off(t,o),e}o.__fn=n,this.on(t,e,o)},H.prototype.off=function(t,e){t=(0,w.kJ)(t)?t:[t];var n=this;t.forEach((function(t){n._removeListener(t,e)}))},H.prototype.createEvent=function(t){var e=new J;return e.init(t),e},H.prototype.fire=function(t,e){var n,r,i,o;if(o=Y.call(arguments),"object"==typeof t&&(t=(e=t).type),!t)throw new Error("no event type specified");if(r=this._listeners[t]){n=e instanceof J?e:this.createEvent(e),o[0]=n;var s=n.type;t!==s&&(n.type=t);try{i=this._invokeListeners(n,o,r)}finally{t!==s&&(n.type=s)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},H.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},H.prototype._destroy=function(){this._listeners={}},H.prototype._invokeListeners=function(t,e,n){for(var r;n&&!t.cancelBubble;)r=this._invokeListener(t,e,n),n=n.next;return r},H.prototype._invokeListener=function(t,e,n){var r;if(n.callback.__isTomb)return r;try{void 0!==(r=function(t,e){return t.apply(null,e)}(n.callback,e))&&(t.returnValue=r,t.stopPropagation()),!1===r&&t.preventDefault()}catch(t){if(!this.handleError(t))throw console.error("unhandled error in event listener"),console.error(t.stack),t}return r},H.prototype._addListener=function(t,e){var n,r=this._getListeners(t);if(r){for(;r;){if(r.priority<e.priority)return e.next=r,void(n?n.next=e:this._setListeners(t,e));n=r,r=r.next}n.next=e}else this._setListeners(t,e)},H.prototype._getListeners=function(t){return this._listeners[t]},H.prototype._setListeners=function(t,e){this._listeners[t]=e},H.prototype._removeListener=function(t,e){var n,r,i,o=this._getListeners(t);if(e)for(;o;)n=o.next,(i=o.callback)!==e&&i.__fn!==e||(r?r.next=n:this._setListeners(t,n)),r=o,o=n;else this._setListeners(t,null)},J.prototype.stopPropagation=function(){this.cancelBubble=!0},J.prototype.preventDefault=function(){this.defaultPrevented=!0},J.prototype.init=function(t){(0,w.f0)(this,t||{})};var W=n(168),Z=n(674);function K(t,e){this._eventBus=t,this._elementRegistry=e}function q(t,e,n){var r=n||e.firstChild;t!==r&&e.insertBefore(t,r)}K.$inject=["eventBus","elementRegistry"],K.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=function(t){return t.parentNode.childNodes[1]}(n))||(e=(0,_.Ue)("g"),(0,_.Sh)(e).add("djs-children"),(0,_.R3)(n.parentNode,e)):e=n,e},K.prototype._clear=function(t){var e=function(t){return t.childNodes[0]}(t);return(0,Z.ZH)(e),e},K.prototype._createContainer=function(t,e,n,r){var i=(0,_.Ue)("g");(0,_.Sh)(i).add("djs-group"),void 0!==n?q(i,e,e.childNodes[n]):(0,_.R3)(e,i);var o=(0,_.Ue)("g");(0,_.Sh)(o).add("djs-element"),(0,_.Sh)(o).add("djs-"+t),r&&(0,_.Sh)(o).add("djs-frame"),(0,_.R3)(i,o);var s=(0,_.Ue)("g");return(0,_.Sh)(s).add("djs-visual"),(0,_.R3)(o,s),o},K.prototype.create=function(t,e,n){var r=this._getChildrenContainer(e.parent);return this._createContainer(t,r,n,(0,g.He)(e))},K.prototype.updateContainments=function(t){var e,n=this,r=this._elementRegistry;e=(0,w.u4)(t,(function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t}),{}),(0,w.Ed)(e,(function(t){var e=t.children;if(e){var i=n._getChildrenContainer(t);(0,w.Ed)(e.slice().reverse(),(function(t){q(r.getGraphics(t).parentNode,i)}))}}))},K.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},K.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},K.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},K.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},K.prototype.update=function(t,e,n){if(e.parent){var r=this._clear(n);if("shape"===t)this.drawShape(r,e),(0,W.Iu)(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(r,e)}e.hidden?(0,_.Lj)(n,"display","none"):(0,_.Lj)(n,"display","block")}},K.prototype.remove=function(t){var e=this._elementRegistry.getGraphics(t);(0,_.Od)(e.parentNode)};const Q={__depends__:[x],__init__:["canvas"],canvas:["type",C],elementRegistry:["type",B],elementFactory:["type",D],eventBus:["type",H],graphicsFactory:["type",K]};function X(t,e){this.injector=e=e||function(t){return function(t){var e=[],n=[];function r(t){return e.indexOf(t)>=0}t.forEach((function t(i){r(i)||((i.__depends__||[]).forEach(t),r(i)||(function(t){e.push(t)}(i),(i.__init__||[]).forEach((function(t){n.push(t)}))))}));var i=new p(e);return n.forEach((function(t){try{i["string"==typeof t?"get":"invoke"](t)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}})),i}([{config:["value",t=t||{}]},Q].concat(t.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}X.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},X.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}}}]);